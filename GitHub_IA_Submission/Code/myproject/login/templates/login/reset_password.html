<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reset Password</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <!-- Page Title -->
    <h1 class="text-center">Reset Password</h1>

    <!-- Centered Form Row -->
    <div class="row justify-content-center">
        <!-- Form Column -->
        <div class="col-6">
            <!-- Flash Message Display Area -->
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <!-- Display each message in a warning alert box -->
                    <div class="alert alert-warning">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            {% endwith %}

            <!-- Password Reset Form -->
            <form method="POST" class="mt-3">
                <!-- Hidden CSRF Token Field -->
                {{ form.hidden_tag() }}
                <p>Enter a new password for your account.</p>
                <!-- New Password Input Group -->
                <div class="form-group">
                    {{ form.password.label }} 
                    <div class="input-group">
                        {{ form.password(class="form-control") }}
                        <!-- Toggle Button for Password Visibility -->
                        <button type="button" class="btn btn-outline-secondary" id="togglePassword">Show</button>
                    </div>
                </div>
                <!-- Toggle Button for Password Visibility -->
                <div class="form-group">
                    {{ form.password2.label }} 
                    <div class="input-group">
                        {{ form.password2(class="form-control") }}
                        <!-- Toggle Button for Password Visibility -->
                        <button type="button" class="btn btn-outline-secondary" id="togglePassword2">Show</button>
                    </div>
                </div>
                <!-- Submit Button -->
                {{ form.submit(class="btn btn-primary mt-3") }}
            </form>
        </div>
    </div>
</div>
<!-- Bootstrap JavaScript Bundle for Interactive Components -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- JavaScript for Toggle Password Visibility -->

<script>
    // Scripts to toggle the visibility of password and password confirmation fields
    const togglePassword = document.querySelector('#togglePassword');
    const password = document.querySelector('input[name="password"]');
    togglePassword.addEventListener('click', function (e) {
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);
        this.textContent = type === 'password' ? 'Show' : 'Hide';
    });

    // Changes the input type between 'password' and 'text'
    const togglePassword2 = document.querySelector('#togglePassword2');
    const password2 = document.querySelector('input[name="password2"]');
    togglePassword2.addEventListener('click', function (e) {
        const type = password2.getAttribute('type') === 'password' ? 'text' : 'password';
        password2.setAttribute('type', type);
        this.textContent = type === 'password' ? 'Show' : 'Hide';
    });
</script>
</body>
</html>

